# Hatake.Social Mobile App

A React Native mobile application for the Hatake.Social TCG trading platform.

## Features

### Core Features
- **Authentication**: Email/password login and registration
- **Collection Management**: View, add, edit, and remove cards from your collection
- **Card Search**: Search for MTG and Pokémon cards from Scryfall/TCGdex
- **Card Scanner**: Camera-based card recognition for quick collection adds
- **Marketplace**: Browse and create listings to buy/sell cards
- **Trading System**: Create and manage card trades with other users
- **Push Notifications**: Real-time notifications for trades, messages, friend requests
- **Video/Voice Calls**: Real-time communication with LiveKit
- **Friends & Messaging**: Social features with direct messaging
- **Wishlists**: Track cards you want
- **Trade Reputation**: Rating system for completed trades

### Tech Stack
- **Framework**: React Native with Expo SDK 52
- **Navigation**: React Navigation (Native Stack + Bottom Tabs)
- **Video Calls**: LiveKit React Native
- **Push Notifications**: Expo Notifications
- **Storage**: Expo SecureStore for tokens
- **Camera**: Expo Camera for card scanning
- **Icons**: @expo/vector-icons (Ionicons)

## Getting Started

### Prerequisites
- Node.js 18+
- npm or yarn
- Expo CLI (`npm install -g expo-cli`)
- EAS CLI for native builds (`npm install -g eas-cli`)
- iOS Simulator (Mac) or Android Emulator

### Installation

```bash
# Navigate to mobile directory
cd /app/mobile/hatake-mobile

# Install dependencies
npm install

# Start the development server
npm start
```

### Running on Devices

**Note**: Some features (video calls, push notifications) require a native build and won't work in Expo Go.

```bash
# iOS Simulator
npm run ios

# Android Emulator
npm run android

# Web (for testing basic features)
npm run web
```

## Building Native Apps (Required for Full Features)

### Prerequisites
1. Create an Expo account at https://expo.dev
2. Install EAS CLI: `npm install -g eas-cli`
3. Login: `eas login`

### Android Build

```bash
# Configure EAS (first time only)
eas build:configure

# Build development version
eas build --platform android --profile development

# Build production APK
eas build --platform android --profile preview

# Build production AAB (for Play Store)
eas build --platform android --profile production
```

### iOS Build

```bash
# Requires Apple Developer Account
eas build --platform ios --profile development

# Build for TestFlight
eas build --platform ios --profile production
```

### Push Notifications Setup

1. **Android**: No additional setup needed - Expo handles FCM configuration
2. **iOS**: Add your Apple Push Notification certificates in Expo dashboard

The app automatically:
- Requests notification permissions on first launch
- Registers push tokens with the backend
- Displays notifications for:
  - New friend requests
  - Direct messages
  - Trade offers and updates
  - Post reactions

## Project Structure

```
src/
├── components/         # Reusable UI components
│   ├── DrawerMenu.tsx
│   └── IncomingCallNotification.tsx
├── hooks/              # React hooks
│   └── usePushNotifications.ts
├── screens/            # Screen components
│   ├── LoginScreen.tsx
│   ├── FeedScreen.tsx
│   ├── CollectionScreen.tsx
│   ├── MarketplaceScreen.tsx
│   ├── ProfileScreen.tsx
│   ├── FriendsScreen.tsx
│   ├── MessagesScreen.tsx
│   ├── VideoCallScreen.tsx
│   ├── TradesScreen.tsx
│   ├── CreateTradeScreen.tsx
│   ├── ReputationScreen.tsx
│   ├── WishlistScreen.tsx
│   ├── DecksScreen.tsx
│   ├── GroupsScreen.tsx
│   └── NotificationsScreen.tsx
└── config.ts           # API configuration
```

## API Configuration

Update `src/config.ts` with your backend URL:

```typescript
export const API_URL = 'https://www.hatake.eu';  // Production
// or
export const API_URL = 'https://deck-builder-test-1.preview.emergentagent.com';  // Preview
```

## Google Play Store Deployment

### Prerequisites
1. Google Play Developer Account ($25 one-time fee)
2. App signing key generated by EAS

### Steps

1. **Build Production AAB**:
   ```bash
   eas build --platform android --profile production
   ```

2. **Download the AAB** from Expo dashboard

3. **Create App in Play Console**:
   - Go to https://play.google.com/console
   - Create new app, fill in details
   - Upload AAB to "Production" or "Internal testing" track

4. **Complete Store Listing**:
   - App icon (512x512 PNG)
   - Screenshots (phone + tablet recommended)
   - Feature graphic (1024x500)
   - Privacy policy URL
   - App description

5. **Submit for Review**

## License

Private - Hatake.Social © 2026
